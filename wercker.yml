box: golang

initial-build:
  steps:
    - wercker/setup-go-workspace:
      package-dir: github.com/mevansam/cf-copy-plugin

    - script:
      name: Get govendor
      code: |
        go get -u github.com/kardianos/govendor

    - script:
      name: Synchronize vendored dependencies
      code: |
        govendor sync

    - script:
      name: Build
      code: |
        go build ./...

    - script:
      name: Echo done
      code: |
        echo "INITIAL BUILD SUCCESSFUL!!!"

unit-test:
  steps:
    - script:
      name: Run unit tests
      code: |
        govendor test +local

    - script:
      name: Echo done
      code: |
        echo "UNIT TESTS SUCCESSFUL!!!"

development-build:

    - script:
      name: Echo done
      code: |
        echo "DEVELOPMENT BUILD SUCCESSFUL!!!"

integration-test:
  steps:
    - script:
      name: Echo done
      code: |
        echo "INTEGRATION TESTS SUCCESSFUL!!!"

release-build:
  steps:
    - script:
      name: Build all
      code: |
        ./build-all.sh

    - script:
      name: Echo done
      code: |
        echo "BUILD RELEASE SUCCESSFUL!!!"

deploy:
  steps:
    - wercker/setup-go-workspace:
      package-dir: github.com/mevansam/cf-copy-plugin

    - script:
      name: Echo done
      code: |
        echo "DEPLOY DONE!!!"
